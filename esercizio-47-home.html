<!DOCTYPE html>

    <html>

        <head>

            <link rel="stylesheet" type="text/css" href="style-47.css">
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
            integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
            <link rel="preload" href="AmaticSC-Regular.ttf" as="font" type="font/woff">
            <link rel="preload" href="AmaticSC-Bold.ttf" as="font" type="font/woff">

        </head>

        <body>

            <div class="contenitoreimg">

                <svg version="1.1" id="img1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                viewBox="0 0 297 297" style="enable-background:new 0 0 297 297;" xml:space="preserve"><path d="M234.776,0c-30.632,0-56.21,22.337-61.287,51.576l-72.648-0.001L52.325,3.549c-1.957-1.938-4.602-3.026-7.357-3.026h-34.51
                C4.683,0.522,0,5.205,0,10.981s4.683,10.458,10.458,10.458h30.21l30.443,30.137H27.804c-4.268,0-8.107,2.593-9.701,6.552
                c-1.594,3.959-0.621,8.489,2.455,11.446l100.229,96.31v110.201H85.733c-5.775,0-10.458,4.683-10.458,10.458
                c0,5.775,4.683,10.458,10.458,10.458h91.023c5.774,0,10.457-4.683,10.457-10.458c0-5.775-4.683-10.458-10.457-10.458h-35.055
                V165.885l55.935-53.748c10.664,7.987,23.528,12.311,37.14,12.311c34.311,0,62.224-27.913,62.224-62.224
                C297,27.913,269.087,0,234.776,0z M268.684,85.777L252.45,69.544h22.972C274.353,75.492,272.012,81,268.684,85.777z M242.097,44.55
                V21.578c5.948,1.068,11.456,3.41,16.233,6.738L242.097,44.55z M227.456,44.55l-16.224-16.224c4.776-3.331,10.282-5.676,16.224-6.746
                V44.55z M242.097,79.897l16.233,16.233c-4.777,3.328-10.285,5.67-16.233,6.738V79.897z M252.45,54.903l16.233-16.233
                c3.328,4.777,5.67,10.285,6.738,16.233H252.45z M200.879,38.68l12.896,12.896h-18.903C196.124,46.9,198.18,42.551,200.879,38.68z
                M208.709,72.491l-77.463,74.435L53.78,72.49L208.709,72.491z M227.456,83.484v19.394c-5.143-0.913-10.023-2.774-14.434-5.524
                L227.456,83.484z"/><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>

                <svg version="1.1" id="img2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	            viewBox="0 0 297 297" style="enable-background:new 0 0 297 297;" xml:space="preserve">
                <path d="M278.601,61.681C278.601,27.67,250.931,0,216.92,0c-31.018,0-56.752,23.019-61.041,52.869H94.523L72.25,8.322
                c-2.56-5.121-8.792-7.197-13.908-4.637L24.133,20.791c-5.122,2.56-7.197,8.787-4.637,13.907c2.56,5.122,8.789,7.196,13.907,4.637
                l24.938-12.469l13.002,26.003H54.425c-5.725,0-10.366,4.642-10.366,10.366v184.006C44.059,274.679,66.38,297,93.817,297h83.71
                c27.437,0,49.759-22.321,49.759-49.759V122.473C256.376,117.527,278.601,92.157,278.601,61.681z M206.554,73.603v65.827h-68.75
                L104.89,73.603H206.554z M81.71,73.603l32.914,65.827H64.792V73.603H81.71z M177.527,276.267h-83.71
                c-16.005,0-29.025-13.021-29.025-29.025v-87.079h60.198l48.448,96.898c1.816,3.634,5.477,5.734,9.28,5.733
                c1.558,0,3.14-0.353,4.627-1.097c5.122-2.561,7.197-8.787,4.637-13.908l-43.813-87.626h58.384v87.079
                C206.554,263.246,193.532,276.267,177.527,276.267z M227.286,101.296v-38.06c0-5.725-4.642-10.366-10.366-10.366h-39.983
                c4.044-18.356,20.43-32.136,39.983-32.136c22.578,0,40.947,18.369,40.947,40.947C257.867,80.679,244.86,96.693,227.286,101.296z"/><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>

                <svg version="1.1" id="img3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 371.52 371.52" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 371.52 371.52">
                <path d="m272.028,116.588l96.401,43.374-60.696-159.962-159.969,60.678 96.906,43.601-43.022,95.022-27.969-27.97h-33.407l-63.662-133.879-73.52,34.624 12.782,27.141 46.48-21.89 44.701,94.004h-65.477v73.137c7.10543e-15,70.057 56.996,127.052 127.052,127.052h11.367c70.057,0 127.052-56.995 127.052-127.052v-73.137h-59.805l24.786-54.743zm18.298-77.9l24.358,64.196-88.557-39.845 64.199-24.351zm-13.279,162.643v43.137c0,53.515-43.538,97.052-97.052,97.052h-11.367c-53.515,0-97.052-43.537-97.052-97.052v-43.137h89.676l46.812,46.812 46.812-46.812h22.171z"/></svg>

                <svg version="1.1" id="img4" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	            viewBox="0 0 363.432 363.432" style="enable-background:new 0 0 363.432 363.432;" xml:space="preserve"><g>
	            <path d="M221.692,0h-79.953c-5.522,0-10,4.477-10,10v125.751c0,29.139,5.492,57.628,16.322,84.676
                c4.257,10.633,13.051,18.355,23.654,21.37v90.38L150.91,344.9c-3.821,2.337-5.623,6.93-4.409,11.241s5.146,7.29,9.626,7.29h51.178
                c4.479,0,8.412-2.979,9.626-7.29s-0.588-8.904-4.409-11.241l-20.806-12.723v-90.38c10.604-3.015,19.397-10.737,23.653-21.369
                c10.831-27.049,16.323-55.539,16.323-84.677V10C231.692,4.477,227.215,0,221.692,0z M211.692,20v50h-59.953V20H211.692z
                M196.802,212.994c-2.482,6.203-8.404,10.21-15.086,10.21s-12.604-4.008-15.087-10.211c-9.88-24.674-14.89-50.663-14.89-77.243V90
                h59.953v45.751C211.692,162.331,206.683,188.319,196.802,212.994z"/></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>
                
                <svg version="1.1" id="img5" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	            viewBox="0 0 490 490" style="enable-background:new 0 0 490 490;" xml:space="preserve">
                <path id="XMLID_1412_" d="M469.847,323.207c-1.172-8.202-8.769-13.898-16.971-12.728l-38.917,5.561l5.56-38.918
                c1.172-8.201-4.527-15.799-12.728-16.971c-8.196-1.164-15.798,4.527-16.97,12.728l-4.145,29.018l-1.136-1.136
                c-6.131-6.131-13.439-10.678-21.371-13.444l16.765-180.933c0.389-4.201-1.009-8.371-3.851-11.489S369.218,90,364.999,90h-69.031
                l3.047-56.371l112.611,25.987c8.071,1.86,16.126-3.172,17.989-11.243c1.863-8.072-3.171-16.126-11.243-17.989l-129.999-30
                c-4.314-0.996-8.85-0.032-12.391,2.63c-3.539,2.663-5.721,6.754-5.96,11.177L265.925,90h-81.848l-4.098-75.81
                c-0.239-4.423-2.42-8.514-5.96-11.177c-3.54-2.664-8.075-3.625-12.391-2.63l-129.999,30c-8.072,1.863-13.105,9.917-11.243,17.989
                c1.862,8.072,9.913,13.104,17.989,11.243l112.611-25.987L154.034,90H85.002c-4.219,0-8.243,1.776-11.085,4.895
                s-4.24,7.288-3.851,11.489l34.285,370c0.715,7.715,7.188,13.616,14.936,13.616h211.426c0.838,0,1.662-0.069,2.465-0.202
                c14.282-0.661,28.278-5.098,40.359-12.922l54.832-35.508c14.411-9.333,23.712-24.479,25.517-41.553
                c1.806-17.074-4.122-33.829-16.262-45.969l-9.524-9.523l29.018-4.146C465.32,339.006,471.019,331.407,469.847,323.207z M264.303,120
                l-3.784,70h-71.036l-3.784-70H264.303z M107.943,190l-6.487-70h54.199l3.784,70H107.943z M132.962,460l-22.239-240h50.338
                l8.963,165.809c0.447,8.271,7.521,14.591,15.787,14.169c8.272-0.447,14.616-7.516,14.168-15.788L191.104,220h67.793l-8.875,164.19
                c-0.106,1.969,0.171,3.868,0.769,5.628c-2.172,8.973-2.822,18.314-1.841,27.582c1.651,15.618,7.871,30.471,17.721,42.6H132.962z
                M294.346,120h54.199l-6.486,70h-51.497L294.346,120z M288.941,220h50.338l-6.053,65.319c-14.865,3.009-27.86,11.81-36.205,24.697
                l-14.125,21.811L288.941,220z M424.054,396.661c-0.849,8.023-5.219,15.141-11.991,19.525l-54.832,35.508
                c-20.061,12.994-46.891,10.156-63.791-6.745c-16.902-16.901-19.739-43.73-6.747-63.793l35.508-54.833
                c4.386-6.771,11.502-11.143,19.525-11.991c0.948-0.1,1.894-0.149,2.834-0.149c7.019,0,13.737,2.761,18.768,7.791l22.189,22.19
                c0.061,0.063,0.124,0.125,0.186,0.188c0.043,0.043,0.086,0.085,0.13,0.128l30.58,30.58
                C422.117,380.765,424.902,388.638,424.054,396.661z"/><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>
                
                <svg version="1.1" id="img6" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	            viewBox="0 0 297 297" style="enable-background:new 0 0 297 297;" xml:space="preserve">
                <path d="M219.101,12.145l1.254-2.194c1.822-3.189,0.714-7.25-2.475-9.073c-3.19-1.824-7.251-0.713-9.073,2.475l-1.48,2.591
                c-13.284-5.239-27.838-5.582-41.475-0.862c-15.122,5.232-27.302,16.041-34.294,30.434c-2.293,4.719-0.327,10.404,4.393,12.696
                l4.405,2.14h-14.975l-8.431-20.189c-1.477-3.536-4.934-5.839-8.766-5.839H61.157c-5.246,0-9.5,4.254-9.5,9.5s4.254,9.5,9.5,9.5
                h40.697l2.935,7.028H92.507c-3.25,0-6.271,1.669-8.014,4.412c-1.743,2.742-1.96,6.194-0.581,9.136
                c0.199,0.424,19.665,42.741,1.77,74.379c-6.595,11.66-9.801,22.747-9.801,33.895c0,31.869,23.543,58.338,54.15,62.938V278h-21.85
                c-5.246,0-9.5,4.254-9.5,9.5c0,5.246,4.254,9.5,9.5,9.5h62.7c5.246,0,9.5-4.254,9.5-9.5c0-5.246-4.254-9.5-9.5-9.5h-21.85v-42.889
                c30.607-4.6,54.15-31.069,54.15-62.938c0-11.148-3.205-22.235-9.801-33.895c-12.303-21.751-6.948-48.541-2.336-63.298l35.585,17.29
                c1.306,0.635,2.727,0.956,4.152,0.956c1.047,0,2.098-0.173,3.106-0.522c2.381-0.824,4.338-2.56,5.438-4.826
                C252.482,60.8,243.319,28.575,219.101,12.145z M172.851,69.352c-4.906,15.644-10.282,42.394-0.969,67.575h-10.348l-28.22-67.575
                H172.851z M140.944,136.926h-33.763c9.313-25.181,3.938-51.931-0.969-67.575h6.511L140.944,136.926z M180.849,155.926
                c2.232,5.621,3.332,10.991,3.332,16.247c0,24.62-20.03,44.65-44.65,44.65s-44.65-20.03-44.65-44.65
                c0-5.257,1.099-10.626,3.332-16.247H180.849z M197.604,22.959l-15.245,26.679l-9.831-4.777
                C180.288,31.911,190.165,24.235,197.604,22.959z M194.348,55.463l14.389-25.181c0.766,2.19,1.251,4.793,1.406,7.737
                c0.362,6.904-1.14,15.053-4.177,23.089L194.348,55.463z M173.027,22.742c-4.544,4.473-8.797,9.963-12.49,16.293l-6.738-3.274
                C158.888,29.553,165.62,25.104,173.027,22.742z M225.386,70.544l-7.411-3.601c2.781-7.039,4.56-14.16,5.224-20.921
                C226.364,53.656,227.23,62.215,225.386,70.544z"/><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>

            </div>

            <nav id="cocktailnavbar" class="navbar navbar-expand-xl navbar-light bg-light">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navschermopiccolo" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div id="navschermopiccolo" class="collapse navbar-collapse">
                  <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link pageselected" href="esercizio-47-home.html">HOME</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="esercizio-47-name.html">BY NAME</a>
                      </li>
                    <li class="nav-item">
                      <a class="nav-link" href="esercizio-47-ingredient.html">BY INGREDIENT</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" href="esercizio-47-category.html">BY CATEGORY</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="esercizio-47-favourites.html">FAVOURITES</a>
                    </li>
                  </ul>
                </div>
            </nav>

            <div class="welcome">
                <h4>FIND THE RECIPES OF YOUR FAVOURITE COCKTAILS AND MAKE THEM YOURSELF AT HOME!</h4>
            </div>

            <div id="contenitorecards" class="container cards"></div>

            <div id="modalxric" class="modal" tabindex="-1" role="dialog">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <h2 id="modnomedrink"></h2>
                        <h3>INGREDIENT</h3>
                            <ul id="listaingr" class="list-group list-group-flush"></ul>
                        <h3>INSTRUCTIONS</h3>
                            <p id=modpistr></p>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="chiudiesvuota()">CLOSE</button>
                    </div>
                    </div>
                </div>
            </div>

            <script>

                let vcontenitorecards = document.getElementById("contenitorecards");
                let cocktailsarraybyid = [];
                let vmodnomedrink=document.getElementById("modnomedrink");
                let ingrarray = [];
                let vlistaingr=document.getElementById("listaingr");
                let vmodpistr=document.getElementById("modpistr");

                let storagedipartenza = JSON.parse(window.localStorage.getItem("drinksalvati"));

                async function random() {
                    const apiresponserandom = await fetch("https://www.thecocktaildb.com/api/json/v1/1/random.php");
                    const cocktailsrandom = await apiresponserandom.json();
                    return cocktailsrandom;
                }

                async function byid(idcocktail) {
                        const apiresponseid = await fetch(`https://www.thecocktaildb.com/api/json/v1/1/lookup.php?i=${idcocktail}`);
                        const cocktailsid = await apiresponseid.json();
                        cocktailsarraybyid = [];
                        for (let y = 0; y < cocktailsid.drinks.length; y++) {
                            cocktailsarraybyid.push(cocktailsid.drinks[y]);
                        }
                    }

                random().then((cocktailsrandom) => {
                    console.log("LO STORAGE INIZIALE E'");
                    console.log(storagedipartenza);
                    creacocktailcard(cocktailsrandom.drinks[0].strDrinkThumb, cocktailsrandom.drinks[0].strDrink, cocktailsrandom.drinks[0].idDrink);
                    if (storagedipartenza) {
                       for (i = 0; i < storagedipartenza.length; i++) {
                        let drinkpreferito = document.querySelector(`[data-id="${storagedipartenza[i]}"]`);
                        if (drinkpreferito) {
                            drinkpreferito.classList.add("heartr");
                        }
                    } 
                    }
                });

                function creacocktailcard(foto, nomedrink, iddrink) {
                    let card=document.createElement("div");
                    card.classList.add("card");
                    let immagine=document.createElement("img");
                    immagine.classList.add("card-img-top");
                    immagine.setAttribute("src", foto);
                    immagine.setAttribute("alt", "COCKTAIL IMG");
                    let corpo=document.createElement("div");
                    corpo.classList.add("card-body");
                    let contenitorenome=document.createElement("div");
                    let nomecocktail=document.createElement("h3");
                    nomecocktail.innerHTML=nomedrink;
                    let contenitorecuore=document.createElement("div");
                    contenitorecuore.classList.add("divdelcuore");
                    contenitorecuore.innerHTML=`<div class="heartw" data-id=${iddrink} onclick="preferiti()"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                                width="124.065px" height="124.065px" viewBox="0 0 124.065 124.065" style="enable-background:new 0 0 124.065 124.065;"
                                                xml:space="preserve"><g>
                                                <path d="M12.532,77.057c7.7,10.2,17.7,18.4,28.1,25.801c0,0,12.4,8.6,18.1,12.6c2.1,1.4,4.799,1.4,6.799,0c5.7-4,18-12.6,18-12.6
                                                c10.4-7.4,20.2-15.5,28-25.801c6.601-8.8,11.5-19.2,12.4-30.2c1.6-20-11.3-39.2-32.7-39.2c-12.5,0-23.5,6.8-29.1,16.9
                                                c-5.8-10.2-16.7-17-29.2-17c-21.3,0-34.4,19.2-32.8,39.2C1.032,57.757,5.832,68.257,12.532,77.057z"/></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg></div>`;
                    let contenitorebtn=document.createElement("div");
                    contenitorebtn.classList.add("divbtncard");
                    let btncard=document.createElement("button");
                    btncard.setAttribute("type", "button");
                    btncard.setAttribute("iddrink", iddrink);
                    btncard.setAttribute("onclick", "getrecipe(event)");
                    btncard.classList.add("btn", "btn-primary");
                    btncard.innerHTML="GET RECIPE";
                    contenitorenome.appendChild(nomecocktail);
                    contenitorebtn.appendChild(btncard);
                    corpo.appendChild(contenitorenome);
                    corpo.appendChild(contenitorecuore);
                    corpo.appendChild(contenitorebtn);
                    card.appendChild(immagine);
                    card.appendChild(corpo);
                    vcontenitorecards.appendChild(card);
                }

                function aggiungi() {
                    console.log("AGGIUNGI");
                    let iddasalvare = event.target.parentElement.parentElement.parentElement.getAttribute("data-id");
                    let arraytemporaneo = [];
                    if (storagedipartenza) {
                        for (let i = 0; i < storagedipartenza.length; i++) {
                        arraytemporaneo.push(storagedipartenza[i]);
                        }
                    }
                    byid(iddasalvare).then(() => {
                        let obj = {"id": iddasalvare, "foto": cocktailsarraybyid[0].strDrinkThumb, "nome": cocktailsarraybyid[0].strDrink}
                        arraytemporaneo.push(obj);
                        window.localStorage.setItem("drinksalvati", JSON.stringify(arraytemporaneo));
                        storagedipartenza = JSON.parse(window.localStorage.getItem("drinksalvati"));
                    });   
                }

                function rimuovi() {
                    console.log("RIMUOVI");
                    let iddarimuovere = event.target.parentElement.parentElement.parentElement.getAttribute("data-id");
                    let arraytemporaneo = [];
                    if (storagedipartenza) {
                        for (let i = 0; i < storagedipartenza.length; i++) {
                        arraytemporaneo.push(storagedipartenza[i]);
                        }
                        for (let i = 0; i < arraytemporaneo.length; i++) {
                            if (arraytemporaneo[i].id == iddarimuovere) {
                            arraytemporaneo.splice(i, 1);
                            }
                        }
                    }
                    window.localStorage.setItem("drinksalvati", JSON.stringify(arraytemporaneo));
                    storagedipartenza = JSON.parse(window.localStorage.getItem("drinksalvati"));
                }

                function preferiti() {
                    if (event.target.parentElement.parentElement.parentElement.classList.contains("heartr")) {
                        event.target.parentElement.parentElement.parentElement.classList.remove("heartr");
                        rimuovi();
                    } else {
                        event.target.parentElement.parentElement.parentElement.classList.add("heartr");
                        aggiungi();
                    }
                    console.log(event.target.parentElement.parentElement.parentElement.getAttribute("data-id"));
                }

                function getrecipe(event) {
                    ingrarray = [];
                    let idcocktail=event.target.getAttribute("iddrink");
                    byid(idcocktail).then(() => {
                        for (let i = 1; i < 16; i++) {
                            let tempel;
                            if (cocktailsarraybyid[0][`strIngredient${i}`]) {
                                tempel = cocktailsarraybyid[0][`strIngredient${i}`];
                                if (cocktailsarraybyid[0][`strMeasure${i}`]) {
                                    tempel = cocktailsarraybyid[0][`strMeasure${i}`]+" "+tempel;
                                    }
                            }
                            if (tempel) {
                                ingrarray.push(tempel);
                            }
                        }
                        vmodnomedrink.innerHTML=cocktailsarraybyid[0].strDrink;
                        for (let i = 0; i < ingrarray.length; i++) {
                            let rigaxmod=document.createElement("li");
                            rigaxmod.classList.add("list-group-item");
                            rigaxmod.innerHTML=ingrarray[i];
                            vlistaingr.appendChild(rigaxmod);
                        }
                        vmodpistr.innerHTML=cocktailsarraybyid[0].strInstructions;
                        $('#modalxric').modal();
                    })
                }

                function chiudiesvuota() {
                    vlistaingr.innerHTML="";
                }
                
            </script>

            <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"></script>
            <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
            integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
            crossorigin="anonymous"></script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"
            integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s"
            crossorigin="anonymous"></script>

        </body>

    </html>